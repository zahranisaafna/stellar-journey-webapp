<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habit Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4ecd8;
    }
    h1 {
      text-align: center;
      color: #4e342e;
      margin-bottom: 30px;
    }
    form {
      max-width: 500px;
      min-width: 320px;
      margin: 0 auto;
      padding: 32px 28px;
      background: #fff8e1;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(78, 52, 46, 0.08);
      color: #4e342e;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    label {
      margin: 0 0 4px 0;
      color: #6d4c41;
      font-size: 1.08rem;
      font-weight: 500;
    }
    input, textarea, button, select {
      width: 100%;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #bcaaa4;
      padding: 10px;
      margin-bottom: 0;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      min-height: 40px;
      max-height: 120px;
    }
    button {
      background: #8d6e63;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 10px;
      font-size: 1.08rem;
      padding: 12px 0;
      border-radius: 8px;
      font-weight: bold;
    }
    button:hover {
      background: #6d4c41;
    }
    .quote-box {
      max-width: 500px;
      min-width: 320px;
      margin: 24px auto 0 auto;
      background: #e0cfc3;
      color: #4e342e;
      border-radius: 8px;
      padding: 16px;
      font-style: italic;
      box-shadow: 0 2px 6px rgba(78, 52, 46, 0.08);
      text-align: center;
      font-size: 1.08rem;
    }
    .music-box {
      max-width: 500px;
      min-width: 320px;
      margin: 24px auto 0 auto;
      background: #fff8e1;
      border-radius: 8px;
      padding: 12px;
      color: #4e342e;
      box-shadow: 0 2px 6px rgba(78, 52, 46, 0.08);
    }
    .music-box input {
      width: 100%;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <h1>Habit Tracker</h1>
  <form id="habitForm">
    <label for="habitName">Nama Habit:</label>
    <input type="text" id="habitName" required>

    <label for="habitCategory">Kategori:</label>
    <select id="habitCategory" required>
      <option value="Wellness">Wellness</option>
      <option value="Health">Health</option>
      <option value="Productivity">Productivity</option>
      <option value="Learning">Learning</option>
      <option value="Social">Social</option>
      <option value="Other">Other</option>
    </select>

    <label for="habitDate">Tanggal Mulai:</label>
    <input type="date" id="habitDate" required>

    <label for="habitNote">Catatan Tambahan:</label>
    <textarea id="habitNote" rows="2" placeholder="Tulis motivasi atau detail habit..."></textarea>

    <label for="musicLink">Link Musik (YouTube/Spotify):</label>
    <input type="url" id="musicLink" placeholder="https://open.spotify.com/track/... atau https://youtu.be/...">

    <button type="submit">Simpan Habit</button>
  </form>

  <div class="quote-box" id="quoteBox">
    <!-- Quote motivasi akan muncul di sini -->
  </div>

  <div class="music-box" id="musicBox" style="display:none;">
    <strong>Music Mood Booster:</strong>
    <div id="musicEmbed"></div>
  </div>

  <script>
    // Quotes motivasi
    const quotes = [
      "Small steps every day lead to big changes.",
      "Consistency beats intensity.",
      "Focus on progress, not perfection.",
      "Your habits shape your future.",
      "Discipline is choosing between what you want now and what you want most."
    ];
    document.getElementById("quoteBox").textContent = quotes[Math.floor(Math.random() * quotes.length)];

    // Simpan habit ke localStorage
    const form = document.getElementById("habitForm");
    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const name = document.getElementById("habitName").value;
      const category = document.getElementById("habitCategory").value;
      const date = document.getElementById("habitDate").value;
      const note = document.getElementById("habitNote").value;
      const music = document.getElementById("musicLink").value;

      if (!name || !date) {
        alert("Isi semua field!");
        return;
      }

      const habits = JSON.parse(localStorage.getItem("habits")) || [];
      habits.push({ name, category, date, note, music });
      localStorage.setItem("habits", JSON.stringify(habits));

      // Tampilkan embed musik jika ada
      showMusic(music);

      alert("Habit berhasil disimpan!");
      form.reset();
    });

    // Fungsi embed musik
    function showMusic(link) {
      const musicBox = document.getElementById("musicBox");
      const musicEmbed = document.getElementById("musicEmbed");
      if (link.includes("spotify.com")) {
        // Spotify embed
        const embedUrl = link.replace("/track/", "/embed/track/");
        musicEmbed.innerHTML = `<iframe src="${embedUrl}" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>`;
        musicBox.style.display = "block";
      } else if (link.includes("youtu")) {
        // YouTube embed
        let videoId = link.split("v=")[1] || link.split("/").pop();
        if (videoId && videoId.includes("&")) videoId = videoId.split("&")[0];
        musicEmbed.innerHTML = `<iframe width="100%" height="80" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
        musicBox.style.display = "block";
      } else {
        musicBox.style.display = "none";
      }
    }
  </script>
</body>
</html>
